"use client"

import type React from "react"
import { createContext, useContext, useState, useEffect } from "react"

type Language = "uz" | "ru" | "en"

interface LanguageContextType {
  language: Language
  setLanguage: (lang: Language) => void
  t: (key: string) => string
}

const translations = {
  uz: {
    title: "Kino Platformasi",
    subtitle: "O'zbek va xalqaro kinolarni kashf eting",
    search: "Qidirish",
    clear: "Tozalash",
    movies: "Kinolar",
    genres: "Janrlar",
    year: "Yil",
    rating: "Reyting",
    description: "Tavsif",
    director: "Rejissyor",
    actors: "Aktyorlar",
    comments: "Sharhlar",
    addToWatchlist: "Sevimlilarga qo'shish",
    removeFromWatchlist: "Sevimlilardan o'chirish",
    login: "Kirish",
    register: "Ro'yxatdan o'tish",
    profile: "Profil",
    admin: "Admin Panel",
    logout: "Chiqish",
    home: "Bosh sahifa",
    searchPlaceholder: "Kinolarni qidiring...",
    noResults: "Natija topilmadi",
    loading: "Yuklanmoqda...",
    error: "Xatolik yuz berdi",
    success: "Muvaffaqiyat",
    watchNow: "Hozir tomosha qiling",
    trailer: "Treyler",
    share: "Ulashish",
    bookmark: "Xatcho'p",
    viewCount: "Ko'rishlar soni",
    releaseYear: "Chiqarilgan yil",
    duration: "Davomiyligi",
    country: "Mamlakat",
    language: "Til",
    imdbRating: "IMDb reytingi",
    platformRating: "Platform reytingi",
    yourRating: "Sizning bahongiz",
    addComment: "Sharh qoldirish",
    reply: "Javob berish",
    edit: "Tahrirlash",
    delete: "O'chirish",
    save: "Saqlash",
    cancel: "Bekor qilish",
    confirm: "Tasdiqlash",
    yes: "Ha",
    no: "Yo'q",
    next: "Keyingi",
    previous: "Oldingi",
    page: "Sahifa",
    of: "dan",
    total: "Jami",
    results: "natija",
    filters: "Filtrlar",
    sortBy: "Saralash",
    newest: "Eng yangi",
    oldest: "Eng eski",
    mostViewed: "Eng ko'p ko'rilgan",
    topRated: "Eng yuqori baholangan",
    alphabetical: "Alifbo tartibida",
    allGenres: "Barcha janrlar",
    allYears: "Barcha yillar",
    allCountries: "Barcha mamlakatlar",
    drama: "Drama",
    comedy: "Komediya",
    action: "Jangari",
    romance: "Romantik",
    thriller: "Triller",
    horror: "Qo'rqinchli",
    sciFi: "Ilmiy fantastika",
    fantasy: "Fantastika",
    crime: "Jinoyat",
    documentary: "Hujjatli",
    animation: "Animatsiya",
    family: "Oilaviy",
    adventure: "Sarguzasht",
    mystery: "Sirli",
    war: "Urush",
    western: "Vestern",
    musical: "Musiqiy",
    biography: "Biografik",
    history: "Tarixiy",
    sport: "Sport",
  },
  ru: {
    title: "Кино Платформа",
    subtitle: "Откройте узбекские и международные фильмы",
    search: "Поиск",
    clear: "Очистить",
    movies: "Фильмы",
    genres: "Жанры",
    year: "Год",
    rating: "Рейтинг",
    description: "Описание",
    director: "Режиссёр",
    actors: "Актёры",
    comments: "Комментарии",
    addToWatchlist: "Добавить в избранное",
    removeFromWatchlist: "Удалить из избранного",
    login: "Войти",
    register: "Регистрация",
    profile: "Профиль",
    admin: "Админ панель",
    logout: "Выйти",
    home: "Главная",
    searchPlaceholder: "Поиск фильмов...",
    noResults: "Результаты не найдены",
    loading: "Загрузка...",
    error: "Произошла ошибка",
    success: "Успех",
    watchNow: "Смотреть сейчас",
    trailer: "Трейлер",
    share: "Поделиться",
    bookmark: "Закладка",
    viewCount: "Количество просмотров",
    releaseYear: "Год выпуска",
    duration: "Продолжительность",
    country: "Страна",
    language: "Язык",
    imdbRating: "Рейтинг IMDb",
    platformRating: "Рейтинг платформы",
    yourRating: "Ваша оценка",
    addComment: "Оставить комментарий",
    reply: "Ответить",
    edit: "Редактировать",
    delete: "Удалить",
    save: "Сохранить",
    cancel: "Отменить",
    confirm: "Подтвердить",
    yes: "Да",
    no: "Нет",
    next: "Следующий",
    previous: "Предыдущий",
    page: "Страница",
    of: "из",
    total: "Всего",
    results: "результатов",
    filters: "Фильтры",
    sortBy: "Сортировать",
    newest: "Новые",
    oldest: "Старые",
    mostViewed: "Популярные",
    topRated: "Лучшие",
    alphabetical: "По алфавиту",
    allGenres: "Все жанры",
    allYears: "Все годы",
    allCountries: "Все страны",
    drama: "Драма",
    comedy: "Комедия",
    action: "Боевик",
    romance: "Романтика",
    thriller: "Триллер",
    horror: "Ужасы",
    sciFi: "Научная фантастика",
    fantasy: "Фэнтези",
    crime: "Криминал",
    documentary: "Документальный",
    animation: "Анимация",
    family: "Семейный",
    adventure: "Приключения",
    mystery: "Мистика",
    war: "Военный",
    western: "Вестерн",
    musical: "Мюзикл",
    biography: "Биография",
    history: "Исторический",
    sport: "Спорт",
  },
  en: {
    title: "Movie Platform",
    subtitle: "Discover Uzbek and international movies",
    search: "Search",
    clear: "Clear",
    movies: "Movies",
    genres: "Genres",
    year: "Year",
    rating: "Rating",
    description: "Description",
    director: "Director",
    actors: "Actors",
    comments: "Comments",
    addToWatchlist: "Add to Watchlist",
    removeFromWatchlist: "Remove from Watchlist",
    login: "Login",
    register: "Register",
    profile: "Profile",
    admin: "Admin Panel",
    logout: "Logout",
    home: "Home",
    searchPlaceholder: "Search movies...",
    noResults: "No results found",
    loading: "Loading...",
    error: "An error occurred",
    success: "Success",
    watchNow: "Watch Now",
    trailer: "Trailer",
    share: "Share",
    bookmark: "Bookmark",
    viewCount: "View Count",
    releaseYear: "Release Year",
    duration: "Duration",
    country: "Country",
    language: "Language",
    imdbRating: "IMDb Rating",
    platformRating: "Platform Rating",
    yourRating: "Your Rating",
    addComment: "Add Comment",
    reply: "Reply",
    edit: "Edit",
    delete: "Delete",
    save: "Save",
    cancel: "Cancel",
    confirm: "Confirm",
    yes: "Yes",
    no: "No",
    next: "Next",
    previous: "Previous",
    page: "Page",
    of: "of",
    total: "Total",
    results: "results",
    filters: "Filters",
    sortBy: "Sort By",
    newest: "Newest",
    oldest: "Oldest",
    mostViewed: "Most Viewed",
    topRated: "Top Rated",
    alphabetical: "Alphabetical",
    allGenres: "All Genres",
    allYears: "All Years",
    allCountries: "All Countries",
    drama: "Drama",
    comedy: "Comedy",
    action: "Action",
    romance: "Romance",
    thriller: "Thriller",
    horror: "Horror",
    sciFi: "Sci-Fi",
    fantasy: "Fantasy",
    crime: "Crime",
    documentary: "Documentary",
    animation: "Animation",
    family: "Family",
    adventure: "Adventure",
    mystery: "Mystery",
    war: "War",
    western: "Western",
    musical: "Musical",
    biography: "Biography",
    history: "History",
    sport: "Sport",
  },
}

const LanguageContext = createContext<LanguageContextType | undefined>(undefined)

export function LanguageProvider({ children }: { children: React.ReactNode }) {
  const [language, setLanguage] = useState<Language>("uz")

  useEffect(() => {
    const savedLanguage = localStorage.getItem("language") as Language
    if (savedLanguage && ["uz", "ru", "en"].includes(savedLanguage)) {
      setLanguage(savedLanguage)
    }
  }, [])

  const handleSetLanguage = (lang: Language) => {
    setLanguage(lang)
    localStorage.setItem("language", lang)
  }

  const t = (key: string): string => {
    return translations[language][key as keyof (typeof translations)[Language]] || key
  }

  return (
    <LanguageContext.Provider value={{ language, setLanguage: handleSetLanguage, t }}>
      {children}
    </LanguageContext.Provider>
  )
}

export function useLanguage() {
  const context = useContext(LanguageContext)
  if (context === undefined) {
    throw new Error("useLanguage must be used within a LanguageProvider")
  }
  return context
}
